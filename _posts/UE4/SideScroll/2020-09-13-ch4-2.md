---
title:  "UE4 Chapter 4-2. ëª¬ìŠ¤í„° AI : í”Œë ˆì´ì–´ë¥¼ ì«“ì•„ ê°€ëŠ” AI, Enum" 

categories:
  -  UE4 Lesson 1 
tags:
  - [Game Engine, UE4]

toc: true
toc_sticky: true

date: 2020-09-13
last_modified_at: 2020-09-13
---

# ëª¬ìŠ¤í„°ê°€ í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ê°€ê²Œ í•˜ê¸°

í”Œë ˆì´ì–´ê°€ ìê¸° ìì‹ (ëª¬ìŠ¤í„°)ì™€ ê°€ê¹Œì´ ìˆìœ¼ë©´ í”Œë ˆì´ì–´ë¥¼ ë”°ë¼ê°€ê²Œ ë§Œë“¤ê¸°.

## ğŸ”” í”Œë ˆì´ì–´ì™€ì˜ ê±°ë¦¬ êµ¬í•˜ê¸°

í”Œë ˆì´ì–´ê°€ ìê¸° ìì‹ (ëª¬ìŠ¤í„°)ê³¼ ê°€ê¹Œì´ ìˆìœ¼ë©´ ë”°ë¼ê°€ì•¼ í•˜ë¯€ë¡œ <u>ë§¤ í”„ë ˆì„ë§ˆë‹¤ í”Œë ˆì´ì–´ì™€ì˜ ê±°ë¦¬ë¥¼ ì²´í¬</u>í•´ì•¼ í•œë‹¤.

> ğŸš© "DeaultMonsterBP" ë¸”ë£¨í”„ë¦°íŠ¸ ì´ë²¤íŠ¸ ê·¸ë˜í”„

![image](https://user-images.githubusercontent.com/42318591/93012104-64235680-f5d8-11ea-8271-89af18304d02.png)

- `Tick` ğŸ‘‰ `Set DistancePlayerCharacter` ğŸ‘‰ `Set DirToPlayerCharacter`
  - ë§¤ í”„ë ˆì„ë§ˆë‹¤ ë³€ìˆ˜ `DistancePlayerCharacter`ì™€ `DirToPlayerCharacter`ì˜ ê°’ì„ ì„¸íŒ…í•œë‹¤.
- (í”Œë ˆì´ì–´(Player Index 0)ì˜ ìœ„ì¹˜ - ëª¬ìŠ¤í„°(self)ì˜ ìœ„ì¹˜) ê²°ê³¼ ë²¡í„°ì˜ Y ë°©í–¥ì—ì„œì˜ ê±°ë¦¬ë§Œ ì·¨í•œë‹¤. 
    - íš¡ìŠ¤í¬ë¡¤ ê²Œì„ì´ê¸° ë•Œë¬¸ì— X ì¶•(ì•, ë’¤)ëŠ” ì“°ì§€ ì•Šê³  Y ì¶•(ì™¼ìª½, ì˜¤ë¥¸ìª½)ë§Œ ë”°ì§ˆ ê²ƒì´ë‹¤. ë”°ë¼ì„œ í”Œë ˆì´ì–´ì™€ ëª¬ìŠ¤í„°ì™€ì˜ ê±°ë¦¬ë¥¼ <u>Y ë°©í–¥ì—ì„œì˜ ê±°ë¦¬ë§Œ ë”°ì§„ë‹¤.</u>
      - `Break Vector`
        - ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¨ Vectorì˜ X, Y, Z ì„±ë¶„ì„ ê°ê° ì¶œë ¥í•œë‹¤.
        - (í”Œë ˆì´ì–´(Player Index 0)ì˜ ìœ„ì¹˜ - ëª¬ìŠ¤í„°(self)ì˜ ìœ„ì¹˜)ì˜ 
      - `Make Vector`
        - ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¨ X, Y, Z ì„±ë¶„ìœ¼ë¡œ Vectorë¥¼ ë§Œë“¤ì–´ ë¦¬í„´í•œë‹¤.
        - (í”Œë ˆì´ì–´(Player Index 0)ì˜ ìœ„ì¹˜ - ëª¬ìŠ¤í„°(self)ì˜ ìœ„ì¹˜) ê²°ê³¼ ë²¡í„°ì˜ Y ê°’ë§Œ ì·¨í•œ í›„ ì´ Y ê°’ìœ¼ë¡œ (0, Y, 0) ë²¡í„°ë¥¼ ë§Œë“ ë‹¤.
        - ì´ ë¦¬í„´ ê²°ê³¼ê°€ ë°”ë¡œ ëª¬ìŠ¤í„°(ìê¸° ìì‹ )ê³¼ í”Œë ˆì´ì–´ì™€ì˜ <u>ê±°ë¦¬ë¡œ ì‚¬ìš©í•  ê°’ì´ë‹¤. <u>Y ë°©í–¥ì—ì„œì˜ ê±°ë¦¬.</u>
- `DistancePlayerCharacter` ğŸ‘‰ ëª¬ìŠ¤í„°(ìê¸° ìì‹ )ê³¼ í”Œë ˆì´ì–´ì™€ì˜ <u>Y ë°©í–¥ì—ì„œì˜ ê±°ë¦¬(float)</u>
  - `Make Vector`ì˜ ë¦¬í„´ê°’ì„ `Set DistancePlayerCharacter`ì— ì—°ê²°
- `DirToPlayerCharacter` ğŸ‘‰ ëª¬ìŠ¤í„°(ìê¸° ìì‹ )ê³¼ í”Œë ˆì´ì–´ì™€ì˜ <u>Y ë°©í–¥ ë²¡í„°</u>
  - `Make Vector`ì˜ ë¦¬í„´ ë²¡í„°ë¥¼ `Normalize` í•˜ì—¬ ë°©í–¥ ë²¡í„°(ë‹¨ìœ„ ë²¡í„°)ë¡œ ë§Œë“ ë‹¤.
  - ì´ë¥¼ `Set DirToPlayerCharacter`ì— ì—°ê²°

<br>

## ğŸ”” í”Œë ˆì´ì–´ê°€ ê°€ê¹Œì´ ì˜¤ë©´ í”Œë ˆì´ì–´ë¥¼ ì«“ì•„ê°€ê²Œ í•˜ì.

### Enum ì •ì˜

ì–¸ë¦¬ì–¼ì—ì„œ **Enum**ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ **ì½˜í…ì¸  ë¸Œë¼ìš°ì € - ìš°í´ - ë¸”ë£¨í”„ë¦°íŠ¸ - Enumeration**ì„ í´ë¦­í•˜ë©´ ëœë‹¤. ì´ê³³ì—ì„œ Enumì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. Enumerationì„ ìƒì„±í•˜ê³  ì´ë¦„ì€ "MonsterState"ìœ¼ë¡œ í•´ì£¼ì. <u>ëª¬ìŠ¤í„°ì˜ ìƒíƒœ</u>ë¥¼ ì •ì˜í•  ê²ƒì´ë‹¤.

![image](https://user-images.githubusercontent.com/42318591/93013526-44922b00-f5e4-11ea-98ef-147ce80afea5.png)

- 3 ê°€ì§€ ìƒíƒœë¥¼ ì •ì˜í•´ì£¼ì
  - `Idle` ğŸ‘‰ ì •ì§€
  - `FollowChar` ğŸ‘‰ ìºë¦­í„°(í”Œë ˆì´ì–´)ë¥¼ ì«“ì•„ ê°€ëŠ” ìƒíƒœ
  - `AttackChar` ğŸ‘‰ ìºë¦­í„°(í”Œë ˆì´ì–´)ë¥¼ ê³µê²©í•˜ëŠ” ìƒíƒœ

<br>

### ì«“ì•„ê°€ê²Œ ë§Œë“¤ê¸°

> ğŸš© "DeaultMonsterBP" ë¸”ë£¨í”„ë¦°íŠ¸ ì´ë²¤íŠ¸ ê·¸ë˜í”„

![image](https://user-images.githubusercontent.com/42318591/93013632-1a8d3880-f5e5-11ea-99e0-3f469ff87e0c.png)

`DistancePlayerCharacter`(ê±°ë¦¬)ì™€ `DistancePlayerCharacter`(ë°©í–¥)ì„ ì„¤ì •í•´ì£¼ëŠ” ë…¸ë“œ íë¦„ë“¤ì„ `SaveDistAndDir`ì´ë¼ëŠ” ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì‹¤í–‰ë˜ë„ë¡ ë¬¶ì–´ì„œ ë¹¼ë‘ì—ˆë‹¤. `Tick` ë§¤í”„ë ˆì„ë§ˆë‹¤ ğŸ‘‰ `SaveDistAndDir` ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚´. (ê±°ë¦¬ì™€ ë°©í–¥ì„ ë³€ìˆ˜ì— ì €ì¥)

![image](https://user-images.githubusercontent.com/42318591/93013818-cedb8e80-f5e6-11ea-967e-2f95fcf125d8.png)

- `CurState` ë³€ìˆ˜ ì¶”ê°€
  - Enum íƒ€ì…ì´ë‹¤. ìœ„ì—ì„œ ëª¬ìŠ¤í„°ì˜ ìƒíƒœë“¤ì„ ì¶”ê°€í–ˆë˜ "MonsterState" Enumeration.
- *Tick ğŸ‘‰ SaveDistAndDir*
  - ë§¤ í”„ë ˆì„ë§ˆë‹¤ `SaveDistAndDir` ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. (ê±°ë¦¬ì™€ ë°©í–¥ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ëŠ” ê³¼ì •)
- *SaveDistAndDir ğŸ‘‰ Monster Stateì— ë”°ë¥¸ ìŠ¤ìœ„ì¹˜*
  - **Enum ìŠ¤ìœ„ì¹˜**
    - `CurState` ê°’ì´ `Idle` ì¼ ë•Œ
      - í”Œë ˆì´ì–´ì™€ì˜ ê±°ë¦¬ê°€ 5 ë¯¸í„° ì´í•˜ë©´ ìƒíƒœë¥¼ `Idle`ì—ì„œ `FollowChar`ë¡œ ë°”ê¾¼ë‹¤.
        - (`DistancePlayerCharacter`(ê±°ë¦¬) <= 500.0) ì¡°ê±´ì‹ì„ ì‹¤í–‰í•œë‹¤.
          - ê±°ë¦¬ê°€ 5 ë¯¸í„° ì´ë‚´ë¼ë©´ True ë¦¬í„´. ì–¸ë¦¬ì–¼ì—ì„œëŠ” 100 ì´ 1ë¯¸í„°ë‹¤. cm ë‹¨ìœ„ë¼ì„œ.
        - ì¡°ê±´ì‹ì´ ì°¸ì´ë¼ë©´ **Set CurState** ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. 
          - `Cur State` ê°’ì„ `Idle`ì—ì„œ `FollowChar`ë¡œ ì„¤ì •í•œë‹¤.
      - `FollowChar`ë¡œ ìƒíƒœê°€ ë°”ë€Œì—ˆìœ¼ë‹ˆ, `Tick`ì´ë²¤íŠ¸ì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” ë‹¤ìŒ í”„ë ˆì„ì˜ ìŠ¤ìœ„ì¹˜ ì‹¤í–‰ ë•ŒëŠ” `FollowChar` ì¶œë ¥ì— ë‹¬ë¦° ì‹¤í–‰í•€ì´ ì‹¤í–‰ëœë‹¤. âœ¨âœ¨
    - `CurState` ê°’ì´ `FollowChar` ì¼ ë•Œ
      - **Add Movement Input** ë…¸ë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. 
        - ìê¸° ìì‹ (ëª¬ìŠ¤í„°, self)ì„ `DistancePlayerCharacter` ë°©í–¥ìœ¼ë¡œ 1.0 (Scale Values)ë§Œí¼ ì›€ì§ì¸ë‹¤. 
          - ë§¤ í”„ë ˆì„ë§ˆë‹¤ 1 cmì”© ì›€ì§ì´ëŠ” ê¼´ì´ ë¨.
    - ì¦‰, í”Œë ˆì´ì–´ì™€ì˜ ê±°ë¦¬ê°€ 5 ë¯¸í„° ì´í•˜ë©´ í”Œë ˆì´ì–´ê°€ ìˆëŠ” ë°©í–¥ìœ¼ë¡œ ë§¤ í”„ë ˆì„ë§ˆë‹¤ 1.0 ì›€ì§ì´ê²Œ ëœë‹¤.

<br>

### ì†ë„ì— ë”°ë¼ Idle, Walk ì• ë‹ˆë©”ì´ì…˜

ëª¬ìŠ¤í„°ì˜ ì†ë„ê°€ 0.1 ë³´ë‹¤ í¬ë©´ Walk ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•˜ê²Œ í•˜ê³ , 0.1 ë³´ë‹¤ ì‘ìœ¼ë©´ Idle ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•˜ë„ë¡ í•œë‹¤. 

> ğŸš© "DeaultMonsterAnimBP" ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ ì´ë²¤íŠ¸ ê·¸ë˜í”„

ì• ë‹ˆë©”ì´ì…˜ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ëª¬ìŠ¤í„°ì˜ ì†ë„ë¥¼ ë°›ì•„ì™€ ì´ë¥¼ `Speed` ë³€ìˆ˜ì— ì €ì¥í•´ì•¼ í•œë‹¤. float íƒ€ì…ì˜ `Speed` ë³€ìˆ˜ë¥¼ ì¶”ê°€í–ˆë‹¤.

![image](https://user-images.githubusercontent.com/42318591/93014476-4b24a080-f5ec-11ea-8241-e954cf73305c.png)

- `Blueprint Update Animation` ğŸ‘‰ `Set Speed`
  - ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œëŠ” ë§¤í”„ë ˆì„ë§ˆë‹¤ `Speed` ë³€ìˆ˜ ê°’ì„ ì„¸íŒ…í•œë‹¤.
    - ì´ ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ì£¼ì¸("DefaultMonsterBP")ì˜ ì†ë„ì˜ í¬ê¸°ë¥¼ `Speed`ì— ë‹´ëŠ”ë‹¤.
      - Try Get Pawn Owner : ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ì˜ ì£¼ì¸ì„ ë¦¬í„´
      - Get Velocity : ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¨ ì•¡í„°ì˜ ì†ë„ ë²¡í„°ë¥¼ ë¦¬í„´
      - Vector Length : ì…ë ¥ìœ¼ë¡œ ë“¤ì˜¤ì˜¨ ë²¡í„°ì˜ í¬ê¸°ë¥¼ ë¦¬í„´ 

> ğŸš© "DeaultMonsterAnimBP" ì• ë‹ˆë©”ì´ì…˜ ë¸”ë£¨í”„ë¦°íŠ¸ ì• ë‹˜ ê·¸ë˜í”„

![image](https://user-images.githubusercontent.com/42318591/93014574-27158f00-f5ed-11ea-8db6-713f644453f9.png)


- Idle ì• ë‹ˆë©”ì´ì…˜ ğŸ‘‰ Walk ì• ë‹ˆë©”ì´ì…˜ : (`Speed` > 0.1) ì¼ ë•Œ ë°œìƒ
  -![image](https://user-images.githubusercontent.com/42318591/93014594-43193080-f5ed-11ea-95c1-dd2c0159757c.png){: width="80%" height="80%"}{: .align-center}
- Walk ì• ë‹ˆë©”ì´ì…˜ ğŸ‘‰ Idle ì• ë‹ˆë©”ì´ì…˜ : (`Speed` <= 0.1) ì¼ ë•Œ ë°œìƒ
  - ![image](https://user-images.githubusercontent.com/42318591/93014603-4d3b2f00-f5ed-11ea-878e-63eb35d19152.png){: width="80%" height="80%"}{: .align-center}

<br>

### ê¸°íƒ€ ì„¤ì •

- ë¬¸ì œì 
  - í”Œë ˆì´ì–´ë¥¼ ì«“ëŠ” ì†ë„ê°€ ë„ˆë¬´ ë¹ ë¦„ ğŸ‘‰ ì†ë„ ì¤„ì´ê¸°
  - í”Œë ˆì´ì–´ì™€ ì¶©ëŒí•˜ë©´ íŠ•ê²¨ì ¸ ë‚˜ì˜´ ğŸ‘‰ ì¶©ëŒì‹œ í”Œë ˆì´ì–´ë¥¼ ê´€í†µí•˜ê¸°
  - ì• ë‹ˆë©”ì´ì…˜ì´ ë²„ë²…ê±°ë¦¼ ğŸ‘‰ Walk ì• ë‹ˆë©”ì´ì…˜ ìì²´ì— ì´ë™ê°’ì´ ìˆì–´ì„œ ê·¸ëŸ° ê²ƒì´ë¯€ë¡œ ë£¨íŠ¸ ëª¨ì…˜ ì ê¸ˆ
- ê·¸ë¦¬ê³  í–¥í•˜ëŠ” ë°©í–¥ì— ë”°ë¼ íšŒì „í•˜ê¸° 

#### ì†ë„ë¥¼ ì¤„ì„

> ğŸš© "DeaultMonsterBP" ë¸”ë£¨í”„ë¦°íŠ¸ `Character Movement` ì»´í¬ë„ŒíŠ¸ í´ë¦­

![image](https://user-images.githubusercontent.com/42318591/93014676-eb2ef980-f5ed-11ea-8d55-ef3dd95e3655.png)

"DeaultMonsterBP"ì˜ ìµœëŒ€ ì†ë„ë¥¼ 110ìœ¼ë¡œ ì¤„ì˜€ë‹¤.

#### ì¶©ëŒë˜ì§€ ì•Šê²Œ

> ğŸš© "DeaultMonsterBP" ë¸”ë£¨í”„ë¦°íŠ¸ `Capsule Component`(ëª¬ìŠ¤í„° ìì²´ì˜ Collision) ì»´í¬ë„ŒíŠ¸ í´ë¦­

![image](https://user-images.githubusercontent.com/42318591/93014703-2fba9500-f5ee-11ea-8d72-96d0c72bc9ed.png)

"DeaultMonsterBP" ìì²´ì˜ Collisionì€ Pawn ì— ëŒ€í•´ì„œëŠ” ê´€í†µí•˜ë„ë¡ ì²´í¬í–ˆë‹¤. (ì´ê²Œ ê°€ëŠ¥í•˜ë ¤ë©´ Customìœ¼ë¡œ ë°”ê¿”ì£¼ì–´ì•¼ í•¨) í”Œë ˆì´ì–´ì™€ ëª¬ìŠ¤í„°ë“¤ì€ Characterì´ë¯€ë¡œ Pawnì´ë‹ˆê¹Œ ëª¬ìŠ¤í„°ëŠ” í”Œë ˆì´ì–´ì™€ ë³¸ì¸ê³¼ ê°™ì€ ëª¬ìŠ¤í„°ë“¤ì— ëŒ€í•´ì„œë§Œ ê´€í†µí•  ê²ƒì´ë‹¤.

#### ë£¨íŠ¸ ëª¨ì…˜ ì ê¸ˆ

> ğŸš© "sword_and_shield_walk" ì• ë‹ˆë©”ì´ì…˜ íŒŒì¼

ê±·ëŠ” ì• ë‹ˆë©”ì´ì…˜ ìì²´ê°€ ì•ìœ¼ë¡œ ê±·ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ë¼ ì´ë™ ê°’ì´ ì¡´ì¬í•œë‹¤. ì œìë¦¬ì—ì„œë§Œ ì§„í–‰ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ ì†ë„ ìœ„ì¹˜ ê°’ì„ ê³„ì‚°í•˜ëŠ”ë°ì— ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ë£¨íŠ¸ ëª¨ì…˜ì„ ì ê¶ˆ ì• ë‹ˆë©”ì´ì…˜ì´ ì˜í–¥ ì£¼ì§€ ì•Šê²Œë” í•œë‹¤.

![image](https://user-images.githubusercontent.com/42318591/93014744-9fc91b00-f5ee-11ea-8fa7-21413f7bd698.png)


#### ë°©í–¥ì— ë”°ë¼ íšŒì „í•˜ê¸°

> ğŸš© "DeaultMonsterBP" ë¸”ë£¨í”„ë¦°íŠ¸ `Character Movement` ì»´í¬ë„ŒíŠ¸ í´ë¦­

![image](https://user-images.githubusercontent.com/42318591/93014763-bec7ad00-f5ee-11ea-8f1b-72bea604e69f.png)

íšŒì „ ì†ë„ë„ ì¦ê°€ì‹œì¼œ ì£¼ì—ˆë‹¤.

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}