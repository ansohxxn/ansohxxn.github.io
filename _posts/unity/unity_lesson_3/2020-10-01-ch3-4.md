---
title:  "Chapter 3-4. íŒŒê´´ ê°€ëŠ¥í•œ í™˜ê²½ë“¤ : ë‚˜ë¬´ ë²Œëª©í•˜ê¸°" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-10-01
last_modified_at: 2020-10-01
---

# Chapter 3. íŒŒê´´ ê°€ëŠ¥í•œ í™˜ê²½ë“¤


<br>

# ë²Œëª© í•˜ê¸°

- ë‚˜ë¬´ì— ì—¬ëŸ¬ êµ°ë° í ì§‘ì„ ë‚´ê³ 
- ë‚˜ë¬´ì˜ ëª¨ë“  ë©´ì— í ì§‘ì´ ë‚˜ìˆëŠ” ìƒíƒœì—ì„œ ë‚˜ë¬´ë¥¼ íƒ€ê²©í•˜ë©´
- ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ê³ 
- í†µë‚˜ë¬´ 3 ê°œë¡œ ë³€í•˜ê²Œ êµ¬í˜„

<br>

## ğŸš– ë‚˜ë¬´ êµ¬ì„± ì˜¤ë¸Œì íŠ¸ë“¤ ì„¤ì •

### ë‚˜ë¬´ êµ¬ì¡°

![image](https://user-images.githubusercontent.com/42318591/94769595-61549e00-03ed-11eb-8c8b-208d461eb926.png)

- `Tree` ğŸ‘‰ ë¹ˆ ì˜¤ë¸Œì íŠ¸ 
  - `Stump` 
    - ë‚˜ë¬´ì˜ ì•„ë« ë¶€ë¶„.
    - ë‚˜ë¬´ë¥¼ ë²Œëª© í•˜ê³  ë‚˜ë©´ ì´ ë¶€ë¶„ë§Œ ë‚¨ëŠ”ë‹¤.
  - `Tree`
    - ë‚˜ë¬´ì˜ ìœ— ë¶€ë¶„
    - ë‚˜ë¬´ë¥¼ ë²Œë³µ í•˜ê³  ë‚˜ë©´ ì´ `Tree`ëŠ” ë•…ì— ì“°ëŸ¬ì§„ë‹¤.
  - 5 ê°œì˜ `TreePiece` 
    - ë‚˜ë¬´ì˜ ì´ 5 ê°œì˜ `TreePiece` ë¶€ë¶„ì„ ë•Œë¦´ ë•Œ ë§ˆë‹¤ ê°ê° íŒŒê´´ ë¨.
  - 1 ê°œì˜ `TreePieceMiddle`
    - 5 ê°œ ì¡°ê°ì„ ë‹¤ ë•Œë¦¬ê³  ë§ˆì§€ë§‰ ê°€ìš´ë° í”¼ìŠ¤ê¹Œì§€ ë•Œë ¤ì„œ ëª¨ë“  ì¡°ê°ì„ ë•Œë¦¬ê²Œ ë˜ë©´ ë‚˜ë¬´ì˜ ìœ—ë¶€ë¶„ì´ ë² ì—¬ ì“°ëŸ¬ì§€ê²Œ í•  ê²ƒì´ë‹¤.

<br>

### ì»´í¬ë„ŒíŠ¸ ì„¤ì •

- `Tree`
  - Capsule Collider ë¶™ì–´ìˆëŠ” ìƒíƒœ
    - í‰ì†Œì— í™œì„±í™” í•´ë‘ë˜ <u>ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§ˆ ë• ë¹„í™œì„±í™” í•´ì£¼ì–´ì•¼ í•œë‹¤.</u>
      - ì•„ë˜ì— í›„ìˆ í•  ë‚˜ë¬´ ìœ—ë¶€ë¶„ì˜ Capsule Collider ê°€ ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§ˆ ë–„ í™œì„±í™” ë˜ëŠ”ë°, ê·¸ëŸ¼ ë‘ ì½œë¼ì´ë”ê°€ ë§ë‹¿ê²Œ ë˜ì„œ ì—„ì²­ë‚œ ì¶©ëŒì´ ì¼ì–´ë‚œë‹¤.
      - ë”°ë¼ì„œ ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ë©´ ì „ì²´ì ì¸ ë‚˜ë¬´ í˜•íƒœì— ë¶™ì–´ìˆëŠ” Capsule Colliderë¥¼ êº¼ì£¼ì–´ì•¼ í•œë‹¤.
  - "Tree" íƒœê·¸ ë‹¬ì•„ì£¼ê¸°
  - `Stump` 
    - Box Collider 
  - `Tree`
    - Rigidbody
      - Gravity êº¼ë‘ê¸° (ì“°ëŸ¬ì¡Œì„ ë•Œ í™œì„±í™”)
      - ë‚˜ë¬´ ë² ê¸°ê°€ ì™„ë£Œ ë˜ë©´ ì¤‘ë ¥ì— ì˜í•˜ì—¬ ì“°ëŸ¬ì ¸ì•¼ í•˜ë‹ˆê¹Œ
    - Capsule Collider
      - ë¹„í™œì„±í™” í•´ë‘ê¸° (ì“°ëŸ¬ì¡Œì„ ë•Œ í™œì„±í™”)
      - ì“°ëŸ¬ì¡Œì„ ë•Œ ë•…ì— ì¶©ëŒë˜ì–´ ë•…ì„ ëš«ì§€ ì•Šë„ë¡
      - ë‚˜ë¬´ ìœ—ë¶€ë¶„ í¬ê¸°ì— ë§ê²Œ í¬ê¸° ì¡°ì ˆí•´ì£¼ê¸°

ì „ì²´ì ì¸ ë‚˜ë¬´ì— í•˜ë‚˜, ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ ìœ— ë¶€ë¶„ì— í•˜ë‚˜ ì´ë ‡ê²Œ Capsule Colliderê°€ 2 ê°œ ë¶™ì–´ìˆëŠ” ìƒíƒœ.

<br>

## ğŸš– ë‚˜ë¬´ ë•Œë¦´ ë•Œ ìƒì„±í•  ì´í™íŠ¸ íš¨ê³¼

![image](https://user-images.githubusercontent.com/42318591/94776607-ff9c3000-03fc-11eb-81b2-febfd7843cca.png)

- ë‚˜ë¬´ ë•Œë¦´ ë•Œ ìƒì„±ì‹œí‚¬ ì´í™íŠ¸ë¡œ ì“¸ `Tree_Hit_Effect_Prefab` í”„ë¦¬íŒ¹
  - ì—¬ëŸ¬ ì¡°ê°ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. 
  - ë‚˜ë¬´ë¥¼ ë•Œë¦´ ë•Œë§ˆë‹¤ ì´ ì¡°ê°ë“¤ì˜ ìƒì„± ì‹œí‚¤ì. 
    - ìƒì„±ë˜ìë§ˆì Collider ì™€ ì¤‘ë ¥ì— ì˜í•´ ì¡°ê°ë“¤ì´ ê°ê° ë–¨ì–´ì§ˆ ê²ƒì´ë‹¤.
- `Tree_Hit_Effect_Prefab`ì˜ ì¡°ê°ì¸ ìì‹ ì˜¤ë¸Œì íŠ¸ë“¤ í•˜ë‚˜ í•˜ë‚˜
  - Box Collider ë¶™ì´ê¸°
  - Rigidbody ë¶™ì´ê¸°
    - ì§ˆëŸ‰ì€ ì•„ì£¼ ê°€ë³ê²Œ
- ğŸŸ¦í”„ë¦¬íŒ¹ìœ¼ë¡œ ë§Œë“¤ì.

<br>


## ğŸš– ë‚˜ë¬´ ë•Œë¦´ ë•Œ ë„ë¼ì§ˆí•  ë•Œ ì• ë‹ˆë©”ì´ì…˜ 

> `AxeController` ì• ë‹ˆë©”ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ ìˆ˜ì •

![image](https://user-images.githubusercontent.com/42318591/94784949-dfbf3900-0409-11eb-8583-b1c81b3acf2d.png)

- `Chop` íŠ¸ë¦¬ê±° íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.
- `Any State` ğŸ‘‰ `Axe_Tree`
  - `Chop` íŠ¸ë¦¬ê±°ê°€ ë°œë™ë  ë•Œ ì „ì´
- `Axe_Tree` ğŸ‘‰ `Axe_Idle`
  - Has Exit Time ì²´í¬
  - Exit Time 1 ëê¹Œì§€ ì¬ìƒí•œ í›„ ì „ì´

<br>

### ğŸ“œCloseWeapon.cs

> ê·¼ì ‘ ë¬´ê¸°

```c#
    public float attackDelay;  // ê³µê²© ë”œë ˆì´. ë§ˆìš°ìŠ¤ í´ë¦­í•˜ëŠ” ìˆœê°„ ë§ˆë‹¤ ê³µê²©í•  ìˆœ ì—†ìœ¼ë¯€ë¡œ.
    public float attackDelayA;  // ê³µê²© í™œì„±í™” ì‹œì . ê³µê²© ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì—ì„œ ì£¼ë¨¹ì´ ë‹¤ ë»—ì–´ì¡Œì„ ë•Œ ë¶€í„° ê³µê²© ë°ë¯¸ì§€ê°€ ë“¤ì–´ê°€ì•¼ í•œë‹¤.
    public float attackDelayB;  // ê³µê²© ë¹„í™œì„±í™” ì‹œì . ì´ì œ ë‹¤ ë•Œë¦¬ê³  ì£¼ë¨¹ì„ ë¹¼ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ì‹œì‘ë˜ë©´ ê³µê²© ë°ë¯¸ì§€ê°€ ë“¤ì–´ê°€ë©´ ì•ˆëœë‹¤.

    public float workDelay;  // ì‘ì—… ë”œë ˆì´
    public float workDelayA;  // ì‘ì—… í™œì„±í™” ì‹œì .
    public float workDelayB;  // ì‘ì—… ë¹„í™œì„±í™” ì‹œì . 
```

ë„ë¼ë‚˜ ê³¡ê´­ì´ ê°™ì€ `CloseWeapon` ê·¼ì ‘ë¬´ê¸°ë“¤ì€ ê³µê²© ë¿ë§Œí•˜ë‹ˆë¼ ë‚˜ë¬´ë‚˜ í’€ì„ ë² ëŠ”, ì¦‰ ì¼í•˜ëŠ” ì‘ì—…ë„ ìˆê¸° ë•Œë¬¸ì— ê°ê°ì˜ ì‘ì—…ì„ í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ë”°ë¡œ ìˆë‹¤.(ë„ë¼ì˜ ê²½ìš° ë‚˜ë¬´ ë²¨ ë•Œ ì• ë‹ˆë©”ì´ì…˜ì´ ë”°ë¡œ ì¡´ì¬) ë”°ë¼ì„œ ê³µê²© ì• ë‹ˆë©”ì´ì…˜ ê¸°ì¤€ì˜ ë”œë ˆì´ ì‹œê°„ì„ ì‚¬ìš©í•˜ë©´ ì˜ ì•ˆë§ì„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ğŸ“œCloseWeapon.csì— ì‘ì—… ì• ë‹ˆë©”ì´ì…˜ì˜ ì´ ì§€ì—° ì‹œê°„ `workDelay`, ì• ë‹ˆë©”ì´ì…˜ ì¤‘ ì‘ì—…ì´ ì²˜ë¦¬ë˜ëŠ” í™œì„±í™”ë˜ëŠ” ì‹œì  `workDelayA`, ì• ë‹ˆë©”ì´ì…˜ ì¤‘ ì‘ì—…ì´ ë¹„í™œì„±í™” ì²˜ë¦¬ë˜ëŠ” ì‹œì  `workDelayB`.

![image](https://user-images.githubusercontent.com/42318591/94785466-a935ee00-040a-11eb-9204-13572c0187c3.png)


<br>

### ğŸ“œCloseWeaponController.cs

> ê·¼ì ‘ ë¬´ê¸° ì»¨íŠ¸ë¡¤ëŸ¬

```c#
    protected void TryAttack()
    {
        if (Input.GetButton("Fire1"))
        {
            if (!isAttack)
            {
                if(CheckObject())
                {
                    if (currentCloseWeapon.isAxe && hitInfo.transform.tag == "Tree")
                    {
                        StartCoroutine(AttackCoroutine("Chop", currentCloseWeapon.workDelayA, currentCloseWeapon.workDelayB, currentCloseWeapon.workDelay));
                        return;
                    }
                }
                
                StartCoroutine(AttackCoroutine("Attack", currentCloseWeapon.attackDelayA, currentCloseWeapon.attackDelayB, currentCloseWeapon.attackDelay));
            }
        }
    }

    protected IEnumerator AttackCoroutine(string swingType, float _delayA, float _delayB, float _delay)
    {
        isAttack = true;
        currentCloseWeapon.anim.SetTrigger(swingType);

        yield return new WaitForSeconds(_delayA);
        isSwing = true;

        StartCoroutine(HitCoroutine());

        yield return new WaitForSeconds(_delayB);
        isSwing = false;

        yield return new WaitForSeconds(_delay - _delayA - _delayB);
        isAttack = false;
    }
```

- *AttackCoroutine* í•¨ìˆ˜ì— <u>ë§¤ê°œ ë³€ìˆ˜ ì¶”ê°€</u>
  - ìˆ˜ì •í•˜ê¸° ì „
    - ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒê³¼ ì½”ë£¨í‹´ ì§€ì—° ì‹œê°„ì„ ê°€ì§€ëŠ”ë°ì— ìˆì–´ì„œ ê³µê²© ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•˜ëŠ”ë°ì—ë§Œ ê¸°ëŠ¥í•˜ì˜€ë‹¤.
  - ìˆ˜ì •í•œ í›„
    - ğŸ‘‰ ë§¤ê°œ ë³€ìˆ˜ë“¤ì„ ì¶”ê°€í•´ì¤Œìœ¼ë¡œì„œ ê³µê²© ë¿ë§Œ ì•„ë‹ˆë¼ ì–¼ë§ˆë“ ì§€ ë‹¤ë¥¸ ì‘ì—…ì— ëŒ€í•´ì„œë„ ê·¸ì— ë§ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•  ìˆ˜ ìˆë„ë¡ ì• ë‹ˆë©”ì´ì…˜ íŒŒë¼ë¯¸í„° ë¬¸ìì—´ê³¼ ì½”ë£¨í‹´ ì§€ì—°ì‹œê°„ì„ ì¸ìˆ˜ë¡œ ë°›ì•˜ë‹¤.
      - ì´ë ‡ê²Œ ì¸ìˆ˜ë¥¼ ì¶”ê°€í•˜ì§€ ì•Šì•˜ë‹¤ë©´ WorkCorouine() ì´ë ‡ê²Œ ë”°ë¡œ ë˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì•¼ í–ˆì„ì§€ë„ ëª¨ë¥¸ë‹¤!

```c#

    /* ìˆ˜ì • ì „ */
    protected IEnumerator AttackCoroutine()
    {
        isAttack = true;
        currentCloseWeapon.anim.SetTrigger("Attack");

        yield return new WaitForSeconds(currentCloseWeapon.attackDelayA);
        isSwing = true;

        StartCoroutine(HitCoroutine());

        yield return new WaitForSeconds(currentCloseWeapon.attackDelayB);
        isSwing = false;

        yield return new WaitForSeconds(currentCloseWeapon.attackDelay - currentCloseWeapon.attackDelayA - currentCloseWeapon.attackDelayB);
        isAttack = false;
    }


    /* ìˆ˜ì • í›„ */
    protected IEnumerator AttackCoroutine(string swingType, float _delayA, float _delayB, float _delay)
    {
        isAttack = true;
        currentCloseWeapon.anim.SetTrigger(swingType);

        yield return new WaitForSeconds(_delayA);
        isSwing = true;

        StartCoroutine(HitCoroutine());

        yield return new WaitForSeconds(_delayB);
        isSwing = false;

        yield return new WaitForSeconds(_delay - _delayA - _delayB);
        isAttack = false;
    }
```

- *TryAttack()* ë§ˆìš°ìŠ¤ ì¢Œí´ ì…ë ¥ìœ¼ë¡œ ê³µê²©í•˜ë ¤ëŠ”ë° *CheckObject()* ì¶©ëŒëœ ëŒ€ìƒì´ ìˆë‹¤ë©´
  - ê·¸ ë•Œ í˜„ì¬ì˜ ë¬´ê¸°ê°€ ë„ë¼ì´ë©° ì¶©ëŒëœ ëŒ€ìƒì´ ë‚˜ë¬´ë¼ë©´
    - *AttackCoroutine* í•¨ìˆ˜ì— ì¸ìˆ˜ë¡œ "Chop" ê³¼ ì‘ì—…ê³¼ ê´€ë ¨ëœ ë”œë ˆì´ ì‹œê°„ë“¤ì„ ë„˜ê²¨ **ë²Œëª©í•˜ëŠ” ì‘ì—…ì— ë§ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•˜ë„ë¡ í•œë‹¤.**
      ```c#
      StartCoroutine(AttackCoroutine("Chop", currentCloseWeapon.workDelayA, currentCloseWeapon.workDelayB, currentCloseWeapon.workDelay));
      ```
    - <u>ë¦¬í„´í•˜ê³  ì¢…ë£Œ</u>ì‹œí‚¨ë‹¤. 
  - ë¦¬í„´ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ê·¸ëƒ¥ ê³µê²©í•˜ê¸° ìœ„í•´ ì¢Œí´ ëˆŒë €ë˜ ê²ƒì¼í…Œë‹ˆ **ê³µê²©ì— ë§ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ì¬ìƒí•˜ë„ë¡ í•œë‹¤.**


```c#
    if (!isAttack)
    {
        if(CheckObject())
        {
            if (currentCloseWeapon.isAxe && hitInfo.transform.tag == "Tree")
            {
                StartCoroutine(AttackCoroutine("Chop", currentCloseWeapon.workDelayA, currentCloseWeapon.workDelayB, currentCloseWeapon.workDelay));
                return;
            }
        }
                
        StartCoroutine(AttackCoroutine("Attack", currentCloseWeapon.attackDelayA, currentCloseWeapon.attackDelayB, currentCloseWeapon.attackDelay));
    }
```

<br>

## ğŸš– ì‘ì€ í†µë‚˜ë¬´ í”„ë¦¬íŒ¹

![image](https://user-images.githubusercontent.com/42318591/94785735-0893fe00-040b-11eb-81ab-267a0b94c0ff.png)

- `Log` í”„ë¦¬íŒ¹ ğŸ‘‰ í° ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ê³  íŒŒê´´ë˜ë©´ 3 ê°œì˜ `Log` í†µë‚˜ë¬´ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±.
  - Rigidbody ë¶™ì´ê¸°
  - Capsule Collider ë¶™ì´ê¸°
    - í†µë‚˜ë¬´ í¬ê¸°ì— ë§ì¶° í¬ê¸° ì¡°ì ˆí•˜ê¸°
      - **Direction**ìœ¼ë¡œ ì¶•ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. í¬ê¸°ì˜ ê¸°ì¤€ì´ ë˜ëŠ” ì¶•.
        - Z-Axis ì•ë’¤ í¬ê¸° 
        - X-Axis ì¢Œìš° í¬ê¸°
        - Y-Axis ìœ„ì•„ë˜ í¬ê¸°
  - Material ì„ Mesh ì— ì¶”ê°€
    - í…ìŠ¤ì²˜ íŒŒì¼ì„ Materialì˜ Albedo ì— ì…í ìˆ˜ ìˆë‹¤.

<br>

## ğŸš– ë‚˜ë¬´ ë²Œëª© í•˜ê¸°

### ğŸ“œTreeComponent.cs

> `Tree` ë¶€ëª¨ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì—¬ì£¼ê¸°

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TreeComponent : MonoBehaviour
{
    [SerializeField]
    private GameObject[] go_treePieces;  // ê°€ìš´ë° ì¡°ê°ì„ ì œì™¸í•œ ê¹ì¼ 5 ê°œì˜ ë‚˜ë¬´ í…Œë‘ë¦¬ ì¡°ê°ë“¤.
    [SerializeField]
    private GameObject go_treeCenter;  // ê°€ìš´ë° ì¡°ê°. ì´ ì¡°ê°ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ íŒŒê´´ë˜ë©´ ë‚˜ë¬´ê°€ ì“°ëŸ¬ì ¸ì•¼ í•œë‹¤.

    [SerializeField]
    private GameObject go_Log_Prefabs;  // í†µë‚˜ë¬´. ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§„ ì´í›„ ìƒì„±í• .
         
    [SerializeField]
    private float force;  // ë‚˜ë¬´ê°€ ë•…ì— ì“°ëŸ¬ì§€ë„ë¡ ë°€ì–´ì¤„ í˜ì˜ ì„¸ê¸°(ëœë¤ìœ¼ë¡œ ì •í•  ê²ƒ) 
    [SerializeField]
    private GameObject go_ChildTree;  // ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ ìœ—ë¶€ë¶„. ì“°ëŸ¬ì§€ê³  ë‚œ ë‹¤ìŒì— ì§€ì—° ì‹œê°„ í›„ íŒŒê´´ ë˜ì•¼ í•´ì„œ í•„ìš”í•¨.

    [SerializeField]
    private CapsuleCollider parentCol;  // ì „ì²´ì ì¸ ë‚˜ë¬´ì— ë¶™ì–´ìˆëŠ” ìº¡ìŠ ì½œë¼ì´ë”. ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ë©´ ì´ê±¸ ë¹„í™œì„±í™” í•´ì£¼ì–´ì•¼ í•¨.
    [SerializeField]
    private CapsuleCollider childCol;  // ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ì¸ ë‚˜ë¬´ ìœ—ë¶€ë¶„ì— ë¶™ì–´ìˆëŠ” ìº¡ìŠ ì½œë¼ì´ë”. ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ë©´ ì´ê±¸ í™œì„±í™” í•´ì£¼ì–´ì•¼ í•¨.
    [SerializeField]
    private Rigidbody childRigid; // ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ì¸ ë‚˜ë¬´ ìœ—ë¶€ë¶„ì— ë¶™ì–´ìˆëŠ” Rigidbodyë¥¼ í†µí•´ ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§€ë©´ ì¤‘ë ¥ì„ í™œì„±í™” í•´ì£¼ì–´ì•¼ í•¨.

    [SerializeField]
    private GameObject go_hit_effect_prefab;  // ë‚˜ë¬´ ë„ë¼ì§ˆ í•  ë•Œë§ˆë‹¤ ì´í™íŠ¸ íš¨ê³¼(ë‚˜ë¬´ íŒŒí¸)
    [SerializeField]
    private float debrisDestroyTime;  // íŒŒí¸ ì œê±° ì‹œê°„. ë‚˜ë¬´ ë„ë¼ì§ˆ ì´í™íŠ¸(ë‚˜ë¬´ íŒŒí¸) íŒŒê´´ë  ì‹œê°„

    [SerializeField]
    private float destroyTime;  // ë‚˜ë¬´ ì œê±° ì‹œê°„. ë‚˜ë¬´ ìœ— ë¶€ë¶„ì´ ë•…ì— ì“°ëŸ¬ì§€ê³  ë‚˜ì„œ íŒŒê´´ë  ì‹œê°„.

    [SerializeField]
    private string chop_sound;  // ë‚˜ë¬´ ë„ë¼ì§ˆì‹œ ì¬ìƒì‹œí‚¬ ì‚¬ìš´ë“œ ì´ë¦„ 
    [SerializeField]
    private string falldown_sound;  // ë‚˜ë¬´ ì“°ëŸ¬ì§ˆ ë•Œ ì¬ìƒì‹œí‚¬ ì‚¬ìš´ë“œ ì´ë¦„ 
    [SerializeField]
    private string logChange_sound;  // ë‚˜ë¬´ ì“°ëŸ¬ì ¸ì„œ í†µë‚˜ë¬´ë¡œ ë°”ë€” ë•Œ ì¬ìƒì‹œí‚¬ ì‚¬ìš´ë“œ ì´ë¦„


    // ë„ë¼ì§ˆ í•œ ìœ„ì¹˜ë¥¼ ì•Œì•„ì•¼ ê·¸ ê³³ì—ì„œ ì´í™íŠ¸ íš¨ê³¼ ì¬ìƒí•¨
    // í”Œë ˆì´ì–´ê°€ ë„ë¼ì§ˆ í•œ Y ë°©í–¥ íšŒì „ê°’ì„ ì•Œì•„ì•¼ ì–´ëŠ ì¡°ê°ì´ ë§ì•˜ëŠ”ì§€ë¥¼ ì•Œ ìˆ˜ ìˆìŒ.
    public void Chop(Vector3 _pos, float angleY)   
    {
        Hit(_pos);

        AngleCalc(angleY);

        if (CheckTreePieces())
            return;

        FallDownTree();
    }

    private void Hit(Vector3 _pos)
    {
        SoundManager.instance.PlaySE(chop_sound);

        GameObject clone = Instantiate(go_hit_effect_prefab, _pos, Quaternion.Euler(Vector3.zero));
        Destroy(clone, debrisDestroyTime);
    }

    private void AngleCalc(float _angleY)
    {
        if (_angleY >= 0 && _angleY <= 70)
            DestroyPiece(2);
        else if (_angleY >= 70 && _angleY <= 140)
            DestroyPiece(3);
        else if (_angleY >= 140 && _angleY <= 210)
            DestroyPiece(4);
        else if (_angleY >= 210 && _angleY <= 280)
            DestroyPiece(0);
        else if (_angleY >= 280 && _angleY <= 360)
            DestroyPiece(1);
    }

    private void DestroyPiece(int _num)
    {
        if(go_treePieces[_num].gameObject != null)
        {
            GameObject clone = Instantiate(go_hit_effect_prefab, go_treePieces[_num].transform.position, Quaternion.Euler(Vector3.zero));
            Destroy(clone, debrisDestroyTime);
            Destroy(go_treePieces[_num].gameObject);
        }
    }

    private bool CheckTreePieces()
    {
        for (int i = 0; i < go_treePieces.Length; i++)
        {
            if(go_treePieces[i].gameObject != null)
            {
                return true;
            }
        }
        return false;
    }

    private void FallDownTree()
    {
        SoundManager.instance.PlaySE(falldown_sound);

        Destroy(go_treeCenter);
        
        parentCol.enabled = false;
        childCol.enabled = true;
        childRigid.useGravity = true;

        childRigid.AddForce(Random.Range(-force, force), 0f, Random.Range(-force, force));

        StartCoroutine(LogCoroutine());
    }

    IEnumerator LogCoroutine()
    {
        yield return new WaitForSeconds(destroyTime);

        SoundManager.instance.PlaySE(logChange_sound);

        Instantiate(go_Log_Prefabs, go_ChildTree.transform.position + (go_ChildTree.transform.up * 3f), Quaternion.LookRotation(go_ChildTree.transform.up));
        Instantiate(go_Log_Prefabs, go_ChildTree.transform.position + (go_ChildTree.transform.up * 6f), Quaternion.LookRotation(go_ChildTree.transform.up));
        Instantiate(go_Log_Prefabs, go_ChildTree.transform.position + (go_ChildTree.transform.up * 9f), Quaternion.LookRotation(go_ChildTree.transform.up));

        Destroy(go_ChildTree.gameObject);
    }
}

```

- *Chop(Vector3 _pos, float angleY)* ğŸ‘‰ ë„ë¼ë¡œ ë‚˜ë¬´ ë•Œë¦´ ë•Œë§ˆë‹¤ ì‹¤í–‰ ë¨. 
  - 1ï¸âƒ£ *Hit* ğŸ‘‰ ë„ë¼ ì¹˜ì ë§ˆì í•  ì²˜ë¦¬
    - ë„ë¼ ì¹˜ëŠ” ì‚¬ìš´ë“œ ì¬ìƒ
    - ë„ë¼ ì´í™íŠ¸ íš¨ê³¼ í”„ë¦¬íŒ¹ ìƒì„± í›„ ì¼ì • ì‹œê°„ ë’¤ íŒŒê´´
      - ìƒì„± ìœ„ì¹˜ 
        - `_pos`ì—” ë„ë¼ì™€ ë‚˜ë¬´ê°€ ì¶©ëŒí•œ ìœ„ì¹˜ê°€ ë“¤ì–´ì˜¨ë‹¤.
      - ìƒì„± ë°©í–¥
        - íšŒì „ê°’ ì›ì 
  - 2ï¸âƒ£ *AngleCalc(float _angleY)* ğŸ‘‰ ë„ë¼ë¡œ ë•Œë¦° ê³³ì´ ì–´ëŠ ìª½ ë‚˜ë¬´ ì¡°ê°ì¸ì§€
    - `_angleY`ì—” í”Œë ˆì´ì–´ì˜ `y` íšŒì „ ê°’ì´ ë“¤ì–´ì˜¨ë‹¤. ì¦‰, í”Œë ˆì´ì–´ê°€ í–¥í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì–´ëŠ ìª½ ë‚˜ë¬´ ì¡°ê°ì„ ë•Œë¦° ê²ƒì¸ì§€ë¥¼ íŒŒì•…í•  ê²ƒì´ë‹¤.
      - *í”Œë ˆì´ì–´ê°€ ì•ë’¤ì–‘ì˜† êµ¬ë¶„ì´ ì—†ëŠ” ë¨¸í…Œë¦¬ì–¼ë„ ì—†ëŠ” ìº¡ìŠ ëª¨ì–‘ì´ë¼ì„œ ì´ë ‡ê²Œ í•˜ëŠ”ê²Œ ê°€ëŠ¥í•œ ê²ƒ ê°™ë‹¤. ë³´í†µì˜ ìƒí™©ì—ì„  ì§€ë‚œ í¬ìŠ¤íŠ¸ì²˜ëŸ¼ í”Œë ˆì´ì–´ë¡œë¶€í„° ë„ë¼ë¡œ ë‚˜ë¬´ í”¼ê²©í•œ ì§€ì ì„ í–¥í•˜ëŠ” ë°©í–¥ì˜ `y`ê°’ì„ ë”°ì ¸ì•¼ í•  ê²ƒê°™ë‹¤.*
    - 0 ~ 70 ë„ ì‚¬ì´ë¼ë©´ 3 ë²ˆì§¸ ì¡°ê°ì´ ë§ì•˜ë‹¤ê³  ë³´ê³  210 ~ 280 ë„ ì‚¬ì´ë¼ë©´ ì²« ë²ˆì§¸ ì¡°ê°ì´ ë§ì•˜ë‹¤ê³  ë³´ê³  ì´ëŸ°ì‹ì´ë‹¤.
    - ë§ì•˜ë‹¤ê³  íŒŒì•…ë˜ëŠ” ì¡°ê°ì„ íŒŒê´´ì‹œí‚¨ë‹¤. 
      - *DestroyPiece(int _num)* ğŸ‘‰ ì¸ìˆ˜ë¡œ ë“¤ì–´ì˜¨ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ë‚˜ë¬´ ì¡°ê° ì˜¤ë¸Œì íŠ¸ë¥¼ íŒŒê´´
        - ì²´í¬í•´ ì¤˜ì•¼ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ì•ˆë‚˜ê²ŸJO 
          ```c#
          if(go_treePieces[_num].gameObject != null)
          ```
        - í”¼ê²© ì´í™íŠ¸ íš¨ê³¼ í”„ë¦¬íŒ¹ì„ í•œ ë²ˆ ë” ìƒì„±í•œë‹¤. (ì§„ì§œ ë‚˜ë¬´ë¥¼ ì¹œ ê²½ìš°ì—ëŠ” ì´í™íŠ¸ê°€ ë‘ ê°œ ìƒì„±ë˜ëŠ” ì…ˆì´ë‹¤.)
        - ì´í™íŠ¸ íš¨ê³¼ íŒŒê´´ì‹œí‚¤ê³ 
        - í•´ë‹¹ ë‚˜ë¬´ ì¡°ê° ì˜¤ë¸Œì íŠ¸ë¥¼ íŒŒê´´
  - 3ï¸âƒ£ *CheckTreePieces()* ğŸ‘‰ ì•„ì§ ë‚¨ì•„ ìˆëŠ” ë‚˜ë¬´ ì¡°ê°ì´ ìˆëŠ”ì§€ ì²´í¬
    - ë‚˜ë¬´ ì¡°ê° ë°°ì—´ ê²€ì‚¬
      - ë‚¨ì•„ ìˆëŠ” ë‚˜ë¬´ ì¡°ê°ì´ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´ true ë¦¬í„´
      - ë‚¨ì•„ ìˆëŠ” ë‚˜ë¬´ ì¡°ê°ì´ ì•„ì˜ˆ ì—†ë‹¤ë©´ false ë¦¬í„´
    - ë‚¨ì•„ ìˆë‹¤ë©´ *FallDownTree()* ì‹¤í–‰ ëª»í•˜ê²Œ ë¦¬í„´ ì¢…ë£Œ
  - 4ï¸âƒ£ *FallDownTree()* ğŸ‘‰ ì§± í° ë‚˜ë¬´ ì“°ëŸ¬ ëœ¨ë¦¬ê¸° 
    - ë‚¨ì•„ ìˆëŠ” ë‚˜ë¬´ ì¡°ê°ì´ ì•„ì˜ˆ ì—†ëŠ”ë° ë•Œë¦° ê²½ìš°ì—ë§Œ ì‹¤í–‰ ë¨. ì¦‰ ê°€ìš´ë° ë‚˜ë¬´ ì¡°ê°ë§Œ ë‚¨ì•„ ìˆëŠ” ìƒíƒœì¼ ë•Œ ë•Œë¦° ê²½ìš°
      - ë‚˜ë¬´ ì“°ëŸ¬ì§€ëŠ” ì†Œë¦¬ ì¬ìƒ
      - ë‚˜ë¬´ ê°€ìš´ë° ì¡°ê° íŒŒê´´
      - ë‘ ì½œë¼ì´ë”ê°€ ë§ë‹¿ì•„ ì¶©ëŒì„ ì¼ìœ¼í‚¤ì§€ ì•Šë„ë¡ ê¸°ì¡´ì˜ ë¶€ëª¨ ë‚˜ë¬´ Collider ë¹„í™œì„±í™”
      - ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ ìœ—ë¶€ë¶„ Collider í™œì„±í™”
      - ì“°ëŸ¬ì§ˆ ë‚˜ë¬´ ìœ—ë¶€ë¶„ ì¤‘ë ¥ í™œì„±í™”
      - ë°€ì–´ì£¼ì§€ ì•Šìœ¼ë©´ ë„ˆë¬´ ì •ì§í•˜ê²Œ ìœ„ ë‚˜ë¬´ê°€ ë–¨ì–´ì§ˆ ë•Œ ì•„ë« ë‚˜ë­‡ ìœ„ì— ë”± ì„œìˆê²Œ ëœë‹¤.ê·¸ë˜ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ë„˜ì–´ ì§€ë„ë¡ X,Z ì•ë’¤ ì¢Œìš°ë¡œ ëœë¤í•œ í¬ê¸°ì˜ ë°€ì–´ì£¼ëŠ” í˜ì„ ì¤€ë‹¤.
      - í†µë‚˜ë¬´ ìƒì„± *LogCoroutine()*
        - *LogCoroutine()* ğŸ‘‰ ì“°ëŸ¬ì§„ ë‚˜ë¬´ ìœ—ë¶€ë¶„(`go_ChildTree`) ì‚­ì œí•˜ê³  í†µë‚˜ë¬´ 3 ê°œ ìƒì„±
          - ì“°ëŸ¬ì§„ ë‚˜ë¬´ ìœ— ë¶€ë¶„ ë‹¤ ë„˜ì–´ì§ˆ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ì— ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ `destroyTime`ë§Œí¼ ê¸°ë‹¤ë¦¼  
          - í†µë‚˜ë¬´ ìƒì„± ì†Œë¦¬ ì¬ìƒ
          - 3 ê°œì˜ í†µë‚˜ë¬´ ìƒì„±
            - ìƒì„± ìœ„ì¹˜ 
              - `go_ChildTree` ìœ„ì¹˜ë¡œë¶€í„° `go_ChildTree` <u>ê¸°ì¤€</u> ì¡°ê¸ˆ ìœ— ë¶€ë¶„ (ì“°ëŸ¬ì¡Œìœ¼ë‹ˆê¹Œ yì¶•ë„ ê°€ë¡œë¡œ ëˆ„ìš´ ìƒíƒœë¼ëŠ” ê²ƒì„ ìƒê°í•´ë³´ì)
            - ìƒì„± ë°©í–¥
              - `go_ChildTree` <u>ê¸°ì¤€</u> ì¡°ê¸ˆ ìœ— ë¶€ë¶„ì„ ë°”ë¼ë³´ëŠ” ë°©í–¥. (ì“°ëŸ¬ì¡Œìœ¼ë‹ˆê¹Œ yì¶•ë„ ê°€ë¡œë¡œ ëˆ„ìš´ ìƒíƒœì´ë¯€ë¡œ ì¦‰ ë‚˜ë¬´ê°€ ì“°ëŸ¬ì§„ ë°©í–¥ì„ ë°”ë¼ë³´ë„ë¡ ìƒì„±í•œë‹¤.)
        - `go_ChildTree` ì‚­ì œ


![image](https://user-images.githubusercontent.com/42318591/94786725-4d6c6480-040c-11eb-9066-f13d7c77f915.png)


![image](https://user-images.githubusercontent.com/42318591/94786784-6248f800-040c-11eb-9421-d04fdb510632.png)

ğŸ“œSoundManager ì—ë„ ë‚˜ë¬´ì™€ ê´€ë ¨ëœ 3 ê°œì˜ íš¨ê³¼ìŒê³¼ ê·¸ì˜ ì´ë¦„ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

<br>

### ğŸ“œAxeController.cs

> ë„ë¼ ì»¨íŠ¸ë¡¤ëŸ¬

```c#
    protected override IEnumerator HitCoroutine()
    {
        while (isSwing)
        {
            if (CheckObject())
            {
                if(hitInfo.transform.tag == "Grass")
                {
                    hitInfo.transform.GetComponent<Grass>().Damage();
                }

                if (hitInfo.transform.tag == "Tree")
                {
                    hitInfo.transform.GetComponent<TreeComponent>().Chop(hitInfo.point, transform.eulerAngles.y);
                }

                isSwing = false;
                Debug.Log(hitInfo.transform.name);
            }
            yield return null;
        }
    }
```

ë„ë¼ì™€ ì¶©ëŒí•œ ëŒ€ìƒì´ "Tree" íƒœê·¸ê°€ ë¶™ì–´ìˆë‹¤ë©´ ë‚˜ë­‡ ê°€ì§€ì´ë¯€ë¡œ ğŸ“œTreeComponent.cs ì˜ Chop í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. ë‚˜ë¬´ í”¼ê²© ì´í™íŠ¸ í”„ë¦¬íŒ¹ì„ ìƒì„±í•  ìœ„ì¹˜ëŠ” ë„ë¼ì™€ ëŒ€ìƒì´ ì¶©ëŒí•œ ìœ„ì¹˜ì¸ `hitInfo.point` ì´ë©°, ì–´ë–¤ ë‚˜ë¬´ ì¡°ê°ì´ íŒŒê´´ë  ì§€ëŠ” í”Œë ˆì´ì–´ì˜ `y`íšŒì „ê°’ìœ¼ë¡œ ê²°ì •í•˜ë¯€ë¡œ `transform.eulerAngles.y`ì„ ë„˜ê²¨ ì¤€ë‹¤.

<br>

## ğŸš– ë²Œëª© ì‹œì„ ì²˜ë¦¬

***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}