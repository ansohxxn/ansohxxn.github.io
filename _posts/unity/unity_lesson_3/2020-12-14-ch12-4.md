---
title:  "Chapter 12-4. ê¸°íƒ€ : ë¬¼ êµ¬í˜„í•˜ê¸°" 

categories:
  -  Unity Lesson 3 
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2020-12-14
last_modified_at: 2020-12-14
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° 3D] ì‹¤ì „! ìƒì¡´ê²Œì„ ë§Œë“¤ê¸° - Advanced** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.inflearn.com/course/unity-2#)
{: .notice--warning}


## ğŸš€ ìœ ë‹ˆí‹°ì—ì„œ ë¬¼ ë„£ëŠ” ë°©ë²•

1. ìš°í´ - Import Package - Environment
  - ìœ ë‹ˆí‹° ìì²´ì—ì„œ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„í¬íŠ¸í•˜ë©´ ë¨. Waterë„ ê°™ì´ ì œê³µí•¨.
2. ìœ ë‹ˆí‹° ì—ì…‹ ìŠ¤í† ì–´ì—ì„œ ë¬¼ê³¼ ê´€ë ¨ëœê±° êµ¬ì…í•´ì„œ ì„í¬íŠ¸
3. âœ¨ ì§ì ‘ ë§Œë“¤ê¸°.
  - 1ï¸âƒ£ ë¬¼ í‘œë©´ í…ìŠ¤ì²˜
  - 2ï¸âƒ£ ë¬¼ ì‰ì´ë”
  - 3ï¸âƒ£ ì‰ì´ë”ë¥¼ ì…í ë¬¼ ë¨¸í…Œë¦¬ì–¼

<br>

## ğŸš€ ë¬¼ êµ¬í˜„í•˜ê¸°

### ë¬¼ ë¨¸í…Œë¦¬ì–¼

![image](https://user-images.githubusercontent.com/42318591/102067761-e96c1080-3e3e-11eb-81ad-0108902a6062.png)

![image](https://user-images.githubusercontent.com/42318591/102067773-eec95b00-3e3e-11eb-9309-6c3596f5c7f6.png)

![image](https://user-images.githubusercontent.com/42318591/102067930-1fa99000-3e3f-11eb-836c-bb9e8d4963e6.png)

<br>

### ë¬¼ ì˜¤ë¸Œì íŠ¸

![image](https://user-images.githubusercontent.com/42318591/102068229-8f1f7f80-3e3f-11eb-82a9-290591c5ab85.png)

![image](https://user-images.githubusercontent.com/42318591/102069166-bd518f00-3e40-11eb-9c8d-55fb3f7cc331.png)

í”Œë ˆì´ì–´ê°€ ë¬¼ ìœ„ë¥¼ ê±¸ì„ê¹Œë´ Mesh Collider ë‹¤ ì§€ì›€

![image](https://user-images.githubusercontent.com/42318591/102069905-b8d9a600-3e41-11eb-83e6-bc47eb9c5da4.png)

<br>

## ğŸš€ ë¬¼ ê´€ë ¨ ì‚¬ìš´ë“œ

<br>

## ğŸš€ ë¬¼ì— ë“¤ì–´ê°”ì„ ë•Œ

### ğŸ“œGameManager

```c#
    public static bool isNight = false;
    public static bool isWater = false;
```

<br>


### ğŸ“œDayAndNight

ê¸°ì¡´ì˜ ë©¤ë²„ `isNight` ì§€ìš°ê³  ì „ë¶€ `GameManager.isNight`ë¡œ ëŒ€ì²´í•¨!

<br>

### ğŸ“œWater

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Water : MonoBehaviour
{
    [SerializeField] private float waterDrag; // ë¬¼ ì† ì €í•­ë ¥
    private float originDrag; // ë¬¼ ë°– ì„¸ìƒì˜ ì›ë˜ ì €í•­ë ¥

    private Color originColor; // ë¬¼ ë°– ì„¸ìƒì˜ ë‚®ì˜ ì›ë˜ Fog ìƒ‰ê¹”
    [SerializeField] private Color originNightColor;  // ë¬¼ ë°– ì„¸ìƒì˜ ë°¤ì˜ ì›ë˜ Fog ìƒ‰ê¹”

    [SerializeField] private Color waterColor; // ë‚®ì˜ ë¬¼ ì† Fog ìƒ‰ê¹”
    [SerializeField] private Color waterNightColor; // ë°¤ì˜ ë¬¼ ì† Fog ìƒ‰ê¹”

    [SerializeField] private float waterFogDensity; // ë‚®ì˜ ë¬¼ ì† íƒí•œ ì •ë„
    [SerializeField] private float waterNightFogDensity; // ë‚®ì˜ ë¬¼ ì† íƒí•œ ì •ë„

    private float originFogDensity; // ë¬¼ ë°– ì„¸ìƒì˜ ë‚®ì˜ íƒí•œ ì •ë„
    [SerializeField] private float originNightFogDensity; // ë¬¼ ë°– ì„¸ìƒì˜ ë°¤ì˜ íƒí•œ ì •ë„

    [SerializeField] private float breatheTime;
    private float currentBreatheTime;

    [SerializeField] private GameObject thePlayer;

    [SerializeField] private string sound_WaterIn;
    [SerializeField] private string sound_WaterOut;
    [SerializeField] private string sound_WaterBreathe;


    void Start()
    {
        originColor = RenderSettings.fogColor;
        originFogDensity = RenderSettings.fogDensity;

        originDrag = thePlayer.GetComponent<Rigidbody>().drag; 
    }

    void Update()
    {
        if (GameManager.isWater)
        {
            currentBreatheTime += Time.deltaTime;
            if (currentBreatheTime >= breatheTime)
            {
                SoundManager.instance.PlaySE(sound_WaterBreathe);
                currentBreatheTime = 0;
            }
        }
    }

    private void OnTriggerEnter(Collider other)
    {
        if (other.transform.tag == "Player")
        {
            GetInWater(other);  // ë¬¼ì— ë“¤ì–´ê°
        }
    }

    private void OnTriggerExit(Collider other)
    {
        if (other.transform.tag == "Player")
        {
            GetOutWater(other);  // ë¬¼ì—ì„œ ë‚˜ì˜´
        }
    }


    private void OnTriggerStay(Collider other)
    {
        SmoothColorChange();
    }

    private void SmoothColorChange()
    {
        if (!GameManager.isNight && RenderSettings.fogColor != waterColor)
            RenderSettings.fogColor = Color.Lerp(RenderSettings.fogColor, waterColor, 0.1f);

        if (GameManager.isNight && RenderSettings.fogColor != waterNightColor)
            RenderSettings.fogColor = Color.Lerp(RenderSettings.fogColor, waterNightColor, 0.1f);
    }

    private void GetInWater(Collider _player)
    {
        SoundManager.instance.PlaySE(sound_WaterIn);

        GameManager.isWater = true;
        _player.transform.GetComponent<Rigidbody>().drag = waterDrag;

        if (!GameManager.isNight)
        {
            RenderSettings.fogColor = waterColor;
            RenderSettings.fogDensity = waterFogDensity;
        }
        else
        {
            RenderSettings.fogColor = waterNightColor;
            RenderSettings.fogDensity = waterNightFogDensity;
        }
    }

    private void GetOutWater(Collider _player)
    {
        SoundManager.instance.PlaySE(sound_WaterOut);

        if (GameManager.isWater)
        {
            GameManager.isWater = false;
            _player.transform.GetComponent<Rigidbody>().drag = originDrag;

            if (!GameManager.isNight)
            {
                RenderSettings.fogColor = originColor;
                RenderSettings.fogDensity = originFogDensity;
            }
            else
            {
                RenderSettings.fogColor = originNightColor;
                RenderSettings.fogDensity = originNightFogDensity;
            }
        }
    }
}

```

![image](https://user-images.githubusercontent.com/42318591/102078476-55a24080-3e4e-11eb-86e7-70930a6eafe7.png)

ì•ŒíŒŒê°’ 255

![image](https://user-images.githubusercontent.com/42318591/102078330-1a077680-3e4e-11eb-8e07-d16aecc94a39.png)

![image](https://user-images.githubusercontent.com/42318591/102078404-37d4db80-3e4e-11eb-896e-3345e787feb7.png)


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}