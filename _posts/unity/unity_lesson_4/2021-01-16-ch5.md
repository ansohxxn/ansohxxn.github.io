---
title:  "Ch 5. íë¸Œ(í”Œë ˆì´ì–´)ì˜ ì›€ì§ì„, íšŒì „, ë°˜ë™" 

categories:
  -  Unity Lesson 4
tags:
  - [Game Engine, Unity]

toc: true
toc_sticky: true

date: 2021-01-16
last_modified_at: 2020-01-16
---

ì¼€ì´ë””ë‹˜ì˜ **[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë¦¬ë“¬ ê²Œì„** ìœ íŠœë¸Œ ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
[ğŸŒœ ê°•ì˜ ë“¤ìœ¼ëŸ¬ ê°€ê¸° Click](https://www.youtube.com/watch?v=eLdiOCWPfPc&list=PLUZ5gNInsv_MCnum4bOQRI72LdGkIY3tY&index=2&t=231s)
{: .notice--warning}

## ğŸ“œPlayerController

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    // ì´ë™
    [SerializeField] float moveSpeed = 3;
    Vector3 dir = new Vector3();
    Vector3 destPos = new Vector3();

    // íšŒì „
    [SerializeField] float spinSpeed = 270f;
    Vector3 rotDir = new Vector3();
    Quaternion destRot = new Quaternion();

    bool canMove = true; // ì¿ ë¸Œ ì´ë™ì¤‘ì—ëŠ” ë…¸íŠ¸ íŒì •ì´ ë¶ˆê°€ëŠ¥ í•˜ë„ë¡ (ì½”ë£¨í‹´ ì¤‘ë³µ ì‹¤í–‰ ì°¨ë‹¨)
    
    // ë°˜ë™
    [SerializeField] float recoilPosY = 0.25f;
    [SerializeField] float recoilSpeed = 1.5f;

    [SerializeField] Transform fakeCube = null;
    [SerializeField] Transform realCube = null;


    TimingManager theTimingManager;

    void Start()
    {
        theTimingManager = FindObjectOfType<TimingManager>();
    }

    void Update()
    {
        if (Input.GetKeyDown(KeyCode.A) || Input.GetKeyDown(KeyCode.D) ||
            Input.GetKeyDown(KeyCode.W) || Input.GetKeyDown(KeyCode.S))
        {
            if (canMove)
            {
                // íŒì • ì²´í¬ : Perfect, Cool, Good, Bad ì¼ ë•Œë§Œ True
                if (theTimingManager.CheckTiming())
                {
                    StartAction();
                }
            }
        }
    }

    void StartAction()
    {
        // íë¸Œì˜ xì¶• -> ìœ„ ì•„ë˜   íë¸Œì˜ zì¶• -> ì˜¤ë¥¸ìª½, ì™¼ìª½
        dir.Set(Input.GetAxisRaw("Vertical"), 0, Input.GetAxisRaw("Horizontal"));

        // ì´ë™ ëª©í‘œê°’ ê²Œì‚°
        destPos = transform.position + new Vector3(-dir.x, 0, dir.z);

        // íšŒì „ ëª©í‘œê°’ ê³„ì‚°
        rotDir = new Vector3(-dir.z, 0f, -dir.x);
        fakeCube.RotateAround(transform.position, rotDir, spinSpeed); //ê³µì „
        destRot = fakeCube.rotation;

        StartCoroutine(MoveCo());
        StartCoroutine(SpinCo());
        StartCoroutine(RecoilCo());
    }

    IEnumerator MoveCo()
    {
        canMove = false;
        while(Vector3.SqrMagnitude(transform.position - destPos) >= 0.001f)
        {
            transform.position = Vector3.MoveTowards(transform.position, destPos, moveSpeed * Time.deltaTime);
            yield return null;
        }

        transform.position = destPos;
        canMove = true;
    }

    IEnumerator SpinCo()
    {
        while(Quaternion.Angle(realCube.rotation, destRot) > 0.5f)
        {
            realCube.rotation = Quaternion.RotateTowards(realCube.rotation, destRot, spinSpeed * Time.deltaTime);
            yield return null;
        }

        realCube.rotation = destRot;
    }

    IEnumerator RecoilCo()
    {
        // ì˜¬ë¼ê°
        while (realCube.position.y < recoilPosY)
        {
            realCube.position += new Vector3(0, recoilSpeed * Time.deltaTime, 0);
            yield return null;
        }

        // ë‚´ë ¤ê°
        while (realCube.position.y > 0)
        {
            realCube.position -= new Vector3(0, recoilSpeed * Time.deltaTime, 0);
            yield return null;
        }

        realCube.localPosition = new Vector3(0, 0, 0);
    }
}

```

![image](https://user-images.githubusercontent.com/42318591/104817110-97197780-5862-11eb-85d6-8780fca0282c.png)

![image](https://user-images.githubusercontent.com/42318591/104817130-aac4de00-5862-11eb-81c9-2880b350d70e.png)



***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}