---
title:  "Chapter 2. [ì‹±ê¸€í†¤ íŒ¨í„´] ì˜ˆì œ 1 : í•œ Scene ë‚´ì—ì„œ ì‚¬ìš©" 

categories:
  -  Design Pattern
tags:
  - [Game Engine, Unity, Design Pattern]

toc: true
toc_sticky: true

date: 2020-07-09
last_modified_at: 2020-07-09
---

ì¸í”„ëŸ°ì— ìˆëŠ” ì´ì¬í™˜ë‹˜ì˜ ê°•ì˜ **ê²Œì„ ë””ìì¸ íŒ¨í„´ with Unity** ë¥¼ ë“£ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤. ğŸ˜€  
{: .notice--warning}

# Chapter1. ì‹±ê¸€í†¤ íŒ¨í„´

## ğŸ”” ì˜ˆì œ 1 : í•œ Scene ë‚´ì—ì„œ ì‚¬ìš©

> ê³µ ì˜¤ë¸Œì íŠ¸ê°€ ì¤‘ë ¥ì— ì˜í•´ ë–¨ì–´ì ¸ ë°”ë‹¥ì— ë¶€ë”ªì¹˜ë©´ ì†Œë¦¬ê°€ ë‚˜ê²Œ êµ¬í˜„í•´ë³´ì.

- ê³µ ì˜¤ë¸Œì íŠ¸ì— Rigidbody, Collider ì»´í¬ë„ŒíŠ¸ê°€ ë¶™ì–´ìˆëŠ” ìƒíƒœ.
  - ë°”ë‹¥ì— ë¶€ë”ªì¹˜ë©´ OnCollisionEnter ì´ë²¤íŠ¸ ë°œìƒ
- Audio Sourceì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ì†Œë¦¬ íŒŒì¼ì„ ì‹¤í–‰ì‹œì¼œì•¼ í•œë‹¤.

<br>

### ì‹±ê¸€í†¤ ì‚¬ìš©í•˜ê¸° ì „

#### ğŸ“œ WhenDestroyPlay.cs

- ê³µ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì—¬ì¤€ë‹¤.
- ìê¸° ìì‹ (ê³µ ì˜¤ë¸Œì íŠ¸)ì´ ë°”ë‹¥ì— ë¶€ë”ªì³ OnCollisionEnter ì´ë²¤íŠ¸ ë°œìƒì‹œí‚¤ë©´ 
  - ì˜¤ë””ì˜¤ë¥¼ í”Œë ˆì´ í•œ í›„
  - ìê¸° ìì‹ ì€ íŒŒê´´í•˜ë„ë¡.

> ì´ ì½”ë“œì˜ ë¬¸ì œì  ğŸ‘‰ ì˜¤ë””ì˜¤ê°€ ì¬ìƒë˜ê¸°ë„ ì „ì— ìê¸° ìì‹ (ê³µ ì˜¤ë¸Œì íŠ¸)ì´ íŒŒê´´ë˜ì–´ë²„ë ¤ ì˜¤ë””ì˜¤ë¥¼ ì¬ìƒí•  ìˆ˜ ì—†ê²Œ ëœë‹¤.

- ë”°ë¼ì„œ ì˜¤ë””ì˜¤ë¥¼ í”Œë ˆì´í•œ í›„ <u>ì†Œë¦¬ ì¬ìƒì´ ëë‚ ë•Œ ê¹Œì§€ ëŒ€ê¸° ì‹œê°„</u>ì„ ê°€ì§„ í›„ íŒŒê´´í•´ì•¼ í•œë‹¤.

```c#
using UnityEngine;
using System.Collections;

public class WhenDestroyPlay : MonoBehaviour {

	void OnCollisionEnter(Collision collision)
	{
		GetComponent<AudioSource>().Play();  // ì˜¤ë””ì˜¤ë¥¼ í”Œë ˆì´í•œ í›„

		Destroy(this.gameObject);  // ìê¸° ìì‹  íŒŒê´´
	}
}
```

#### ğŸ“œ DestroyDelayed.cs

- ê³µ ì˜¤ë¸Œì íŠ¸ì— ë¶™ì—¬ì¤€ë‹¤.
- *Destroy(this.gameObject , <u>myAudio.clip.length</u> );*
  - ì¬ìƒì´ ëë‚œ í›„ì— íŒŒê´´í•˜ë„ë¡ ë¬¸ì œë¥¼ í•´ê²°í–ˆë‹¤.

> ì´ ì½”ë“œì˜ ë¬¸ì œì  ğŸ‘‰ ì†Œë¦¬ê°€ ì¬ìƒë˜ëŠ” ë™ì•ˆì—” ì˜¤ë¸Œì íŠ¸ê°€ íŒŒê´´ê°€ ë˜ì§€ ì•Šê³  ê¸°ë‹¤ë¦¬ë¯€ë¡œ ì–´ìƒ‰í•˜ë‹¤. ë°”ë‹¥ì— ë¶€ë”ªì¹˜ê¸´ í–ˆëŠ”ë° ì†Œë¦¬ ë‚  ë™ì•ˆì€ ì˜¤ë¸Œì íŠ¸ê°€ ì‚´ì•„ ìˆìœ¼ë‹ˆê¹Œ.

- `ì‹±ê¸€í†¤ íŒ¨í„´`ì„ ë„ì…í•˜ì—¬ ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ë³´ì.
  - <u>â­ì´ ì „ì²´ ì‹œìŠ¤í…œì„ ê´€í• í•  ê²Œì„ ë§¤ë‹ˆì €ê°€ í•„ìš”í•˜ë‹¤.</u>
  - ì´ ê²Œì„ë§¤ë‹ˆì € ì˜¤ë¸Œì íŠ¸ì˜ <u>ì˜¤ë””ì˜¤ ë§¤ë‹ˆì € ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ì§€ì •í•œ í›„</u> ê³µ ì˜¤ë¸Œì íŠ¸ì™€ ì´ë¥¼ ê³µìœ  í• ê²ƒ.

```c#
using UnityEngine;
using System.Collections;

public class DestroyDelayed : MonoBehaviour {

	private AudioSource myAudio;

	void Start() {
		myAudio = GetComponent<AudioSource>();
	}

	void OnCollisionEnter(Collision collision)
	{
		myAudio.Play();

        Destroy(this.gameObject , myAudio.clip.length );
	}
}
```

<br>

### ì‹±ê¸€í†¤ ì‚¬ìš©

- ì»´í¬ë„ŒíŠ¸ íŒ¨í„´ë„ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ê¸°ëŠ¥ë³„ë¡œ í´ë˜ìŠ¤(ìŠ¤í¬ë¦½íŠ¸)ë¥¼ ë‚˜ëˆ„ì—ˆë‹¤.

#### ğŸ“œ MyAudioPlay.cs

- `ê³µ ì˜¤ë¸Œì íŠ¸`ë¥¼ í”„ë¦¬íŒ¹ìœ¼ë¡œ ë§Œë“¤ê³  ì´ í”„ë¦¬íŒ¹ì— ë¶™ì—¬ì¤€ë‹¤.

> â­<u>AudioManager.Instance()</u>.Play(clip);

- ì‹±ê¸€í†¤ì¸ AudioManagerì˜ static í•¨ìˆ˜ Instance()ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹±ê¸€í†¤ Audio Managerë¥¼ ë¦¬í„´ ë°›ëŠ”ë‹¤. 
  - static í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— í´ë˜ìŠ¤ ì´ë¦„ì¸ AudioManagerë¡œ í˜¸ì¶œ ê°€ëŠ¥.
- **ê³µì´ íŒŒê´´ë˜ê¸° ì „, ê³µì— ë¶™ì–´ ìˆëŠ” Audio Source ì»´í¬ë„ŒíŠ¸ì˜ *clip* ì„ ì‹±ê¸€í†¤ì¸ AudioSource ê°€ ì¬ìƒì‹œì¼œì£¼ë„ë¡ ìê¸° ìì‹ ì˜ *clip*ì„ ë„˜ê²¨ì¤€ë‹¤.**
  - *clip*ì— ì˜¤ë””ì˜¤ í´ë¦½ ë“œë˜ê·¸ ì•¤ ë“œë¡­

```c#
using UnityEngine;
using System.Collections;

public class MyAudioPlay : MonoBehaviour {

	public AudioClip clip;

	void OnCollisionEnter(Collision collision)
	{
		AudioManager.Instance().Play(clip);

		Destroy(this.gameObject);
	}
}

```

#### `GameManager` ì˜¤ë¸Œì íŠ¸ ë§Œë“¤ê¸°

- <u>ë¹ˆ ì˜¤ë¸Œì íŠ¸</u>ë¥¼ ë§Œë“¤ì–´ ì´ë¦„ì„ `GameManager`ë¼ê³  í•˜ì˜€ë‹¤.
- Audio Source ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶™ì—¬ì¤€ë‹¤.
  - clipì€ ì•„ì§ ì—†ëŠ” ìƒíƒœ.
  - ê³µì„ ë¨¼ì € íŒŒê´´ ì‹œí‚¨í›„ ê³µì˜ clipì„ ê°€ì ¸ì™€ <u>ê³µì˜ ìŒì•… clipì„ ê²Œì„ ë§¤ë‹ˆì €ê°€ ì¬ìƒì‹œí‚¬ ê²ƒì´ë‹¤.</u>
- ğŸ“œCreateBall.cs ë¶™ì´ê¸°
- ğŸ“œAudioManager.cs ë¶™ì´ê¸°

#### ğŸ“œ CreateBall.cs

- `GameManager` ì˜¤ë¸Œì íŠ¸ì— ë¶™ì—¬ì¤€ë‹¤.
- í”„ë¦¬íŒ¹ `ê³µ`ì„ ì˜¤ë¸Œì íŠ¸í™” ì‹œì¼œ ìƒì„±í•œë‹¤.   
  - *ball*ì— í”„ë¦¬íŒ¹ `ê³µ` ë“œë˜ê·¸ ì•¤ ë“œë¡­
  - Instantiate(ball, pos, Quaternion.identity);

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CreateBall : MonoBehaviour {

    public GameObject ball;

    void Update()
    {
        if (Input.GetButtonDown("Fire1"))   // ì¢Œí´ë¦­ í•˜ë©´, ë°œì‚¬ í•˜ë©´
        {
            Vector3 pos = new Vector3(0.0f, 4.0f, 0.0f);
            Instantiate(ball, pos, Quaternion.identity);
        }
    }

}
```

#### ğŸ“œ AudioManager.cs

- `GameManager` ì˜¤ë¸Œì íŠ¸ì— ë¶™ì—¬ì¤€ë‹¤.
- â­â­ì–˜ê°€ <u>ì‹±ê¸€í†¤ ê°ì²´</u>ê°€ ëœë‹¤.
  - `ê³µ` ì˜¤ë¸Œì íŠ¸ì™€ ê³µìœ í•˜ê²Œ ë  ê²ƒ.
  - *static AudioManager `_instance` = null;*
    - ê²Œì„ì´ ì‹œì‘ë˜ë©´ ìê¸° ìì‹ (`GameManager`)ë¥¼ static ë³€ìˆ˜ ***_instance*** ì— ë„£ëŠ”ë‹¤.
  

```c#
using UnityEngine;
using System.Collections;

public class AudioManager : MonoBehaviour 
{
	static AudioManager _instance = null;  // ì‹±ê¸€í†¤ ê°ì²´
	public static AudioManager Instance()  // static í•¨ìˆ˜. ê³µìœ í•˜ê³ ì í•˜ëŠ” ì™¸ë¶€ì—ì„œ ì‚¬ìš©í•  ê²ƒ.
	{
		return _instance;  // ìê¸° ìì‹  ë¦¬í„´
	}
	
	void Start () 
	{
		if (_instance == null)  // ê²Œì„ ì‹œì‘ë˜ë©´ ìê¸° ìì‹ ì„ ë„£ìŒ
			_instance = this;
	}
	
	public void Play(AudioClip clip)
	{
		GetComponent<AudioSource>().PlayOneShot(clip);  // ì¬ìƒ
    }
}
```

<br>

### ì •ë¦¬

![image](https://user-images.githubusercontent.com/42318591/86983898-0c2b3680-c1c8-11ea-9880-6ec89eecf3d1.png){: width="80%" height="80%"}{: .align-center}


***
<br>

    ğŸŒœ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° 
    ì–¸ì œë“ ì§€ ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤! ğŸ˜„

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}